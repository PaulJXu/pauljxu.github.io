---
layout: post
title: python编程导论notes2
subtitle: program use python notes2
author: jerpson
tags:
    - python
---

## 6.测试与调试

测试指通过运行程序以确定它是否按照预期工作。调试则指修复已知的未按预期工作的程序。
测试和调试不是你编写完程序之后才开始考虑的问题，优秀的程序员在设计程序时，就已经开始考虑如何使程序易于测试和调试了。

### 6.1 测试

关于测试，最重要的是清楚它的目的是证明错误的存在，而不是证明程序没有错误。

#### 6.1.1 黑盒测试

构建黑盒测试时不需要查看要测试的代码。黑盒测试允许测试者和开发者来自不同人群。

黑盒测试的另外一个好处是，具体实现发生变化时，这种测试仍然适用。因为生成测试数据与具体实现没有关系，所以具体实现改变时，测试不需随之改变。

#### 6.1.2 白盒测试

黑盒测试是必需的，但通常也是不够的。不检查代码内部结构，就不可能知道哪种测试用例
能提供新的信息

#### 6.1.3 执行测试

单元测试：测试者构建并执行测试，用来确定代码的每个独立单元（例如，函数）是否正常工作。

集成测试：用来确定整个程序能否按预期运行。

### 6.2 调试

运行时错误可以按照以下两个维度进行分类

显性→隐性

持续→间歇

#### 6.2.1 学习调试

多数程序员认为最重要的调试工具是 print 语句

要将你的实验过程记录下来，这一点非常重要。当你花费数小时修改代码，并努力追踪那些难以捉摸的错误的时候，非常容易忘掉你已经做了什么。如果不仔细记录，非常容易浪费大量时间，一遍又一遍地重复同样的实验（更可能的是，那些看上去不同但会向你传达同样信息的实验）。请记住，就像很多人说过的，“非常愚蠢的人会一遍又一遍地重复同样的事情，却期待不同的结果。

#### 6.2.2 设计实验

如果将调试看作一个搜索过程，那么每次实验就要尽力缩减搜索空间。缩减搜索空间的一种方法是，设计一个实验，确定代码的一个具体区域是否是造成某个问题的原因，这个问题是在集成测试中被发现的。另外一种缩减搜索空间的方法是，减少导致错误出现所需的测试数据量。

#### 6.2.3 遇到麻烦时

排除常见错误

不要问自己为什么程序没有按照你的想法去做，而要问自己程序为什么像现在这样做

记住，错误可能不在你认为会出错的地方。

试着向其他人解释程序的问题。

不要盲目相信任何书面上的东西。

暂停调试，开始编写文档。

出去散散步，明天接着做。

#### 6.2.4 找到目标错误之后

我们的目标不是修复一个错误，而是快速有效地得到一个没有错误的程序

## 7. 异常与断言

最常见的异常类型是 TypeError 、 IndexError 、 NameError 和 ValueError 

### 7.1 处理异常

使用异常时，程序员仍然需要编写一些代码处理特定异常。如果忘记处理某个异常，那么这个异常就被抛出，程序也随之立刻停止。这是件好事，它可以警告用户，让他们知道程序出现了一些问题。（正如我们在第6章讨论过的，显性错误要远远好于隐性错误。）而且，它还会明确告知程序调试者哪里发生了错误。

### 7.2 将异常用作控制流

### 7.3 断言

Python语言中的 assert 语句为程序员提供了一种确保程序状态符合预期的简单方法。 

```python
assert Boolean expression
assert Boolean expression, argument
```

断言是一种非常有用的防御性编程工具，可以用来确保函数参数具有恰当的类型。